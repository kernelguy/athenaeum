(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{239:function(t,a,s){"use strict";s.r(a);var e=s(6),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integration"}},[t._v("#")]),t._v(" Integration")]),t._v(" "),s("p",[t._v("In this chapter you will find information, on how to integrate the Athenaeum Core Application into your legacy application.\nPlease take your time and read through this carefully.")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#bootstrap-directory"}},[t._v("Bootstrap Directory")])]),s("li",[s("a",{attrs:{href:"#the-application-file-app-php"}},[t._v("The Application file (app.php)")])]),s("li",[s("a",{attrs:{href:"#the-environment-file-env"}},[t._v("The Environment File (.env)")])]),s("li",[s("a",{attrs:{href:"#the-console-application-cli-php"}},[t._v("The Console Application (cli.php)")])]),s("li",[s("a",{attrs:{href:"#publish-assets"}},[t._v("Publish Assets")])]),s("li",[s("a",{attrs:{href:"#make-the-application-available"}},[t._v("Make the Application Available")]),s("ul",[s("li",[s("a",{attrs:{href:"#single-entry-point"}},[t._v("Single Entry Point")])]),s("li",[s("a",{attrs:{href:"#multiple-entry-points"}},[t._v("Multiple Entry Points")])])])]),s("li",[s("a",{attrs:{href:"#onward"}},[t._v("Onward")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"bootstrap-directory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap-directory"}},[t._v("#")]),t._v(" Bootstrap Directory")]),t._v(" "),s("p",[t._v("Create a new directory to contain a application file.\nThe directory "),s("em",[t._v("SHOULD")]),t._v(" not be publicly available via the browser.\nYou can call this directory for "),s("code",[t._v("bootstrap")]),t._v(" or whatever makes sense to you.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("/bootstrap\n")])])]),s("h2",{attrs:{id:"the-application-file-app-php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-application-file-app-php"}},[t._v("#")]),t._v(" The Application file ("),s("code",[t._v("app.php")]),t._v(")")]),t._v(" "),s("p",[t._v("Inside your newly created "),s("code",[t._v("/bootstrap")]),t._v(" directory, create a "),s("code",[t._v("app.php")]),t._v(" file ("),s("em",[t._v("The filename does not matter")]),t._v(").\nThis application file will create a new "),s("code",[t._v("Application")]),t._v(" instance.\nIt accepts an "),s("code",[t._v("array")]),t._v(" of various directory paths.\nThese paths are used throughout the "),s("code",[t._v("Application")]),t._v(" and many of Laravel's components.\nIt is therefore important that these directories exist.\nEdit these paths as you see fit.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create application instance, set the paths it must use")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Aedart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'basePath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'bootstrapPath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'configPath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../configs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'databasePath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../database'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'environmentPath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'resourcePath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../resources'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'storagePath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../storage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'publicPath'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("With the exception of the "),s("code",[t._v("publicPath")]),t._v(", all paths shouldn't be publicly available via a browser.\nPlease configure your web server to deny access to those paths, when requested via Http.")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You can read more about the directory structure, e.g. what each directory is intended for, inside "),s("a",{attrs:{href:"https://laravel.com/docs/7.x/structure#the-bootstrap-directory",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel's documentation"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("h2",{attrs:{id:"the-environment-file-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-environment-file-env"}},[t._v("#")]),t._v(" The Environment File ("),s("code",[t._v(".env")]),t._v(")")]),t._v(" "),s("p",[t._v("In your "),s("code",[t._v("environmentPath")]),t._v(", create an "),s("a",{attrs:{href:"https://laravel.com/docs/7.x/configuration#environment-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("environment file"),s("OutboundLink")],1),t._v(" ("),s("code",[t._v(".env")]),t._v(").\nAt the very minimum, it should contain the following:")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Application name")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APP_NAME")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v('"Athenaeum"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Application environment")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APP_ENV")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v('"production"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Exception Handling")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXCEPTION_HANDLING_ENABLED")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("false")]),t._v("\n")])])]),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("APP_NAME")])]),t._v(" "),s("td",[t._v("Your application's name.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("APP_ENV")])]),t._v(" "),s("td",[t._v('The application\'s environment, e.g. "production", "testing", "development"...etc.')])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXCEPTION_HANDLING_ENABLED")])]),t._v(" "),s("td",[t._v("Enabling or disabling of Athenaeum Core Application's "),s("RouterLink",{attrs:{to:"/archive/current/core/advanced/"}},[t._v("exception handling")]),t._v(".")],1)])])]),t._v(" "),s("h2",{attrs:{id:"the-console-application-cli-php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-console-application-cli-php"}},[t._v("#")]),t._v(" The Console Application ("),s("code",[t._v("cli.php")]),t._v(")")]),t._v(" "),s("p",[t._v("Create a "),s("code",[t._v("cli.php")]),t._v(" file inside your "),s("code",[t._v("basePath")]),t._v(". Once again, the naming of the file does not matter.\nThis file is where Laravel's "),s("a",{attrs:{href:"https://laravel.com/docs/7.x/artisan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Console Application"),s("OutboundLink")],1),t._v(" ("),s("em",[t._v("a light version of Artisan")]),t._v(") is going to be created.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Include composer's autoloader")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/vendor/autoload.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Obtain application instance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/bootstrap/app.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Create "Console Kernel" instance')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$kernel")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("Aedart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Kernel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Run the application - handle input, assign output")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$kernel")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Symfony"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ArgvInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Symfony"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ConsoleOutput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Terminate and exist with status code")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$kernel")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("terminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$input")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("p",[t._v("By now, you should be able to run the Console Application. Try the following:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("php cli.php\n")])])]),s("p",[t._v("You should see an output similar to this:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("Athenaeum "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("via. Laravel Artisan ~ illuminate/console "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.16")]),t._v(".0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.0")]),t._v(".0\n\nUsage:\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nOptions:\n  -h, --help            Display this "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" message\n  -q, --quiet           Do not output any message\n  -V, --version         Display this application version\n      --ansi            Force ANSI output\n      --no-ansi         Disable ANSI output\n  -n, --no-interaction  Do not ask any interactive question\n      --env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ENV"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("       The environment the "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" should run under\n  -v"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("vv"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("vvv, --verbose  Increase the verbosity of messages: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n// "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". remaining not shown "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("h2",{attrs:{id:"publish-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#publish-assets"}},[t._v("#")]),t._v(" Publish Assets")]),t._v(" "),s("p",[t._v("This package, along with it's dependencies, requires certain assets in order to be fully functional, e.g. configuration files.\nTo make these assets available in your legacy application, you need to run the "),s("code",[t._v("vendor:publish-all")]),t._v(" command, via your Console Application ("),s("code",[t._v("cli.php")]),t._v(").\nThe command will publish all assets available assets into your application.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("php cli.php vendor:publish-all\n")])])]),s("p",[t._v("Once the command has completed, you should have a few configuration files available inside your "),s("code",[t._v("/configs")]),t._v(" directory.\nDetails regarding these files are covered in upcoming chapters.\nFor now, it's important that these are available in your application.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("/configs\n    app.php\n    cache.php\n    commands.php\n    events.php\n    exceptions.php\n    schedule.php\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[s("em",[t._v("If you are familiar with Laravel's "),s("code",[t._v("vendor:publish")]),t._v(" command, you will immediately notice that this publish assets command does not offer the same features, as the one provided by Laravel.\nThe "),s("code",[t._v("vendor:publish-all")]),t._v(" is inspired by Laravel's publish command, yet it is not intended to offer the exact same features.\nShould you require more advanced publish features, then you will have to "),s("a",{attrs:{href:"https://laravel.com/docs/7.x/artisan#writing-commands",target:"_blank",rel:"noopener noreferrer"}},[t._v("create your own"),s("OutboundLink")],1),t._v(" publish command.")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"make-the-application-available"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#make-the-application-available"}},[t._v("#")]),t._v(" Make the Application Available")]),t._v(" "),s("p",[t._v("Ideally your legacy application has a single entry point, e.g. a single "),s("code",[t._v("index.php")]),t._v(", located in your "),s("code",[t._v("/public")]),t._v(" directory.\nShould this not be the case, don't worry about it. Multiple entry points is covered a bit later.")]),t._v(" "),s("h3",{attrs:{id:"single-entry-point"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#single-entry-point"}},[t._v("#")]),t._v(" Single Entry Point")]),t._v(" "),s("p",[t._v("Inside you "),s("code",[t._v("index.php")]),t._v(" ("),s("em",[t._v("or whatever your entry point might be called")]),t._v("), require the "),s("code",[t._v("app.php")]),t._v(" file and invoke the "),s("code",[t._v("run()")]),t._v(" method.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Include composer's autoload")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../vendor/autoload.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Obtain the application instance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../bootstrap/app.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Run the application")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... your legacy application logic here ...")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Terminate and destroy the application instance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("terminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("h4",{attrs:{id:"bootstrap-register-and-boot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap-register-and-boot"}},[t._v("#")]),t._v(" Bootstrap, Register and Boot")]),t._v(" "),s("p",[t._v("In the above example, when the "),s("code",[t._v("run()")]),t._v(" method is invoked, the Athenaeum Core Application will bootstrap, register and boot it's registered "),s("a",{attrs:{href:"https://laravel.com/docs/7.x/providers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Providers"),s("OutboundLink")],1),t._v(".\nIf this is done before your legacy application's logic, then all registered services are made available throughout the remaining of the incoming Http request.")]),t._v(" "),s("h4",{attrs:{id:"graceful-shutdown"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#graceful-shutdown"}},[t._v("#")]),t._v(" Graceful Shutdown")]),t._v(" "),s("p",[t._v("In the bottom path of the example, the "),s("code",[t._v("terminate()")]),t._v(" and "),s("code",[t._v("destroy()")]),t._v(" methods are invoked.\nThis allows registered services to perform "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Graceful_exit",target:"_blank",rel:"noopener noreferrer"}},[t._v("graceful shutdown logic"),s("OutboundLink")],1),t._v(", before the application instance along with it's registered services are destroyed.\nInvoking these methods can be omitted, yet it is not advisable.")]),t._v(" "),s("h3",{attrs:{id:"multiple-entry-points"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#multiple-entry-points"}},[t._v("#")]),t._v(" Multiple Entry Points")]),t._v(" "),s("p",[t._v("Should your legacy application have multiple entry points, then you can add additional helper files within your "),s("code",[t._v("/bootstrap")]),t._v(" directory.\nThe following illustrates a possible method, of how you could deal with multiple entry points.")]),t._v(" "),s("h4",{attrs:{id:"header-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#header-file"}},[t._v("#")]),t._v(" Header File")]),t._v(" "),s("p",[t._v("Create a new "),s("code",[t._v("header.php")]),t._v(" file, in which you require the application and invoke the "),s("code",[t._v("run()")]),t._v(" method.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Include composer's autoload")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../vendor/autoload.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Obtain the application instance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/app.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Run the application")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("h4",{attrs:{id:"footer-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#footer-file"}},[t._v("#")]),t._v(" Footer File")]),t._v(" "),s("p",[t._v("Create a "),s("code",[t._v("footer.php")]),t._v(" file to handle the application's graceful shutdown.\nInvoke the "),s("code",[t._v("terminate()")]),t._v(" and "),s("code",[t._v("destroy()")]),t._v(" methods.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Terminate and destroy the application instance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("isset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("terminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),s("h4",{attrs:{id:"your-entry-points"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#your-entry-points"}},[t._v("#")]),t._v(" Your Entry Points")]),t._v(" "),s("p",[t._v("Include "),s("code",[t._v("header.php")]),t._v(" and "),s("code",[t._v("footer.php")]),t._v(" in each of your entry points.\nEnsure that these files are included in the top and bottom part of your entry points.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Include the header file")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../bootstrap/header.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... your entry-point logic here ...")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Include the footer file")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/../bootstrap/footer.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Caution")]),t._v(" "),s("p",[t._v("Please make sure to use the "),s("a",{attrs:{href:"https://www.php.net/manual/en/function.require-once.php",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("require_once")]),s("OutboundLink")],1),t._v(" method, to avoid that your bootstrap files ("),s("code",[t._v("header.php")]),t._v(" and "),s("code",[t._v("footer.php")]),t._v(") are not included multiple times, if your application includes entry points into each other.")])]),t._v(" "),s("h2",{attrs:{id:"onward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onward"}},[t._v("#")]),t._v(" Onward")]),t._v(" "),s("p",[t._v("Hopefully, by now you have an application up and running.\nFor the remainder of this package's documentation, example usages of the major components are illustrated.\nEven if your are a seasoned Laravel developer, you should take some time to browse through it.\nIt might give you some perspectives and helpful information about how this package can be used.")])])}),[],!1,null,null,null);a.default=n.exports}}]);